(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-535e0cd0"],{"06f4":function(t,e,n){var i=n("fd96");t.exports=function(t,e){return new(i(t))(e)}},5598:function(t,e,n){"use strict";n("f365")},"6d92":function(t,e,n){"use strict";n.r(e);n("873e"),n("5c10");var s=n("5d17"),r=(n("ac50"),n("e1c8"),n("0bbd"),n("b589"),n("250d")),i={props:{nameMod:{type:String,default:"rubyeyes"},label:{type:String,default:"标签"},listIds:{type:Array,default:[]},apiFind:{type:String,default:"/manage/contentTag/getList"},allowCreate:{type:Boolean,default:!0},apiAdd:{type:String,default:"/manage/contentTag/addOne"},initTag:{type:Function,default:function(t){return{name:t,comments:"即时创建",alias:t}}}},data:function(){return{userLoading:!1,listAllTags:[]}},watch:{listIds:function(e,n){n=n||[];var i=this,t=(e=e||[]).concat(n).filter(function(t){return-1===n.indexOf(t)||-1===e.indexOf(t)}),a=0<t.length,s=a&&e.length>n.length,r=!0,t=(t=t.map(function(e){var t=i.listAllTags.find(function(t){return t._id==e});if(!t){if(!s)return!1;r=!1}return t})).filter(function(t){return t});a&&r&&(s&&this.$emit("add",{listObjDiff:t,listIds:e}),s||this.$emit("delete",{listObjDiff:t,listIds:e}),this.$emit("change",{listObjDiff:t,listIds:e,strAction:s?"add":"delete"}))}},computed:{listAll:function(){return this.listAllTags},regExpAll:function(){var t;return!!this.listAll&&(t=this.listAll.map(function(t){return t.name}),new RegExp(t.join("|"),"g"))}},methods:{eChangeTags:function(t){var a=this;this.listIds.forEach(function(e,t,n){if(e){var i=a.listAllTags.find(function(t){return t._id==e});if(!!i)e&&""!=e&&a.listIds.push(i._id),a.listIds=Object(s.a)(new Set(a.listIds));else{if(!(a.apiAdd&&a.allowCreate&&a.initTag))return!1;a.addTag(a.initTag(e))}}else a.$message.error("标签undefined：",e)})},addTag:function(n){var i=this,a=this;if(!a.apiAdd||!a.allowCreate||!a.initTag)return!1;a.loadingTag=!0,Object(r.a)({url:a.apiAdd,data:n,method:"post"}).then(function(t){var e;200===t.status&&t.data._id?(t.data&&a.listAllTags.unshift(t.data),-1!=(e=a.listIds.indexOf(n.name))?a.listIds[e]=t.data._id:a.listIds=a.clearListIdTags(),i.$emit("change",{listObjDiff:[t.data],listIds:a.listIds,strAction:"add"}),a.$message({message:a.$t("main.addSuccess"),type:"success"})):a.$message.error("添加标签错误："+t.message,n)}).catch(function(t){debugger;a.$message.error("添加标签错误："+t,n)}).finally(function(){a.loadingTag=!1})},findTags:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=this;this.userLoading=!0,Object(r.a)({url:i.apiFind,params:{pageSize:0,isPaging:"0",searchkey:n||null},method:"get"}).then(function(t){if(200==t.status){var e=t.data.docs||t.data||[];0<e.length?(i.listAllTags=Object(s.a)(new Set(i.listAllTags.concat(e))),i.$emit("loaded",{listAllTags:i.listAllTags})):n&&e.length}else{debugger;i.$message.error("检索标签错误：status="+t.status,t)}}).catch(function(t){debugger}).finally(function(){t.userLoading=!1})},clearListIdTags:function(){var a=this;return this.listIds.filter(function(e,t,n){var i=!!a.listAllTags.find(function(t){return t._id==e});return i})}},mounted:function(){this.findTags()}},n=(n("5598"),n("cba8")),n=Object(n.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form-item",{attrs:{prop:"listIds"}},[n("el-select",{attrs:{span:"24",multiple:"",filterable:"","allow-create":"","default-first-option":"",loading:e.userLoading,placeholder:e.$t("validate.selectNull",{label:this.label})},on:{change:e.eChangeTags},model:{value:e.listIds,callback:function(t){e.listIds=t},expression:"listIds"}},e._l(e.listAllTags,function(t){return n("el-option",{key:t._id,attrs:{label:t.name,value:t._id,disabled:t.isHide}})}),1),n("div",{staticClass:"el-select-suffix el-input--small el-input__suffix"},[n("span",{staticClass:" el-input__suffix-inner"},[e._v(e._s(e.label))])])],1)},[],!1,null,null,null);e.default=n.exports},"6ec2":function(t,e,n){var i=n("8132");t.exports=Array.isArray||function(t){return"Array"==i(t)}},b589:function(t,e,n){"use strict";var i=n("c51c"),a=n("da31")(5),s="find",r=!0;s in[]&&Array(1)[s](function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t){return a(this,t,1<arguments.length?arguments[1]:void 0)}}),n("d263")(s)},da31:function(t,e,n){var y=n("e760"),A=n("e7d3"),T=n("0345"),w=n("a323"),i=n("06f4");t.exports=function(c,t){var f=1==c,g=2==c,p=3==c,h=4==c,b=6==c,v=5==c||b,m=t||i;return function(t,e,n){for(var i,a,s=T(t),r=A(s),l=y(e,n,3),o=w(r.length),u=0,d=f?m(t,o):g?m(t,0):void 0;u<o;u++)if((v||u in r)&&(a=l(i=r[u],u,s),c))if(f)d[u]=a;else if(a)switch(c){case 3:return!0;case 5:return i;case 6:return u;case 2:d.push(i)}else if(h)return!1;return b?-1:p||h?h:d}}},df1f:function(t,e,n){var i=n("98a0"),a=n("45b8").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,a)}},dfbd:function(t,e,n){(t.exports=n("690e")(!1)).push([t.i,".el-select{width:100%}.el-select-suffix{width:0;overflow:visible}.el-select-suffix .el-input__suffix-inner{position:absolute;right:100%;white-space:nowrap}",""])},e1c8:function(t,e,n){var i=n("da5b"),s=n("d4c8"),a=n("0ff5").f,r=n("df1f").f,l=n("d462"),o=n("30bb"),u=p=i.RegExp,d=p.prototype,c=/a/g,f=/a/g,g=new p(c)!==c;if(n("88d0")&&(!g||n("603f")(function(){return f[n("6b42")("match")]=!1,p(c)!=c||p(f)==f||"/a/i"!=p(c,"i")}))){for(var p=function(t,e){var n=this instanceof p,i=l(t),a=void 0===e;return!n&&i&&t.constructor===p&&a?t:s(g?new u(i&&!a?t.source:t,e):u((i=t instanceof p)?t.source:t,i&&a?o.call(t):e),n?this:d,p)},h=r(u),b=0;h.length>b;)!function(e){e in p||a(p,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})}(h[b++]);(d.constructor=p).prototype=d,n("3764")(i,"RegExp",p)}n("e47c")("RegExp")},f365:function(t,e,n){var i=n("dfbd");(i="string"==typeof(i=i.__esModule?i.default:i)?[[t.i,i,""]]:i).locals&&(t.exports=i.locals);(0,n("5925").default)("387a5be1",i,!0,{sourceMap:!1,shadowMode:!1})},fd96:function(t,e,n){var i=n("467c"),a=n("6ec2"),s=n("6b42")("species");t.exports=function(t){var e;return a(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&null===(e=e[s])&&(e=void 0)),void 0===e?Array:e}}}]);