(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3d074c7a"],{1179:function(t,e,a){"use strict";a("d7ce")},1953:function(t,e,a){"use strict";a.r(e);a("ac67"),a("1bc7"),a("32ea"),a("5289"),a("e5b4");var o=a("34f5"),r=(a("6e69"),a("330f")),n=a("c100"),i=(a("60bb"),a("5880"));function s(e,t){var a,o=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,a)),o}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var c=Object(i.createNamespacedHelpers)(nameMod),i={props:l({},n.f),data:function(){return l(l({},n.c),{},{nameMod:nameMod,objDataNCM:{isPop:!1,isFetched:!1}})},components:l(l({},n.a),{},{ContentForm:function(){return a.e("chunk-9c996966").then(a.bind(null,"46d4"))}}),methods:l(l({backToList:n.e.backToList,updateKeywords:n.e.updateKeywords,getLocalContents:n.e.getLocalContents},c.mapActions(["showContentForm"])),{},{createMember:function(t){return{name:t,comments:"即时创建",group:"乐手"}},eChangeMember:function(t){this.formState.formData.listMembers=t.listIds,this.updateKeywords(t.listObjDiff,"delete"==t.strAction)},eBnFetchNCM:function(){var e=this,t=e.$refs.inputName.value;e.objDataNCM.isFetched=!1,fetch("/api/artist/fetchNCMArtist?name="+t).then(function(t){return t.text()}).then(function(t){t=JSON.parse(t);200==t.status&&t.data&&t.data.idNCM?(e.$message({message:"网易云音乐数据自动填充",type:"success"}),e.objDataNCM=Object.assign(e.objDataNCM,t.data,{isPop:!0,isFetched:!0})):e.$message.error(e.$t("validate.inputCorrect",{label:"网易云音乐未找到数据"}))})},eBnSetNcm:function(){var e=this;e.formState.formData.idNCM=e.formState.formData.idNCM||e.objDataNCM.idNCM,e.formState.formData.sImg=e.formState.formData.sImg&&"/static/upload/images/defaultImg.jpg"!=e.formState.formData.sImg?e.formState.formData.sImg:e.objDataNCM.sImg||"",e.formState.formData.discription=e.formState.formData.discription||e.objDataNCM.discription||"",e.formState.formData.alias=e.formState.formData.alias||e.objDataNCM.alias||"",e.formState.formData.comments=e.formState.formData.comments||e.objDataNCM.comments.txt||e.formState.formData.discription,e.formState.formData.listLinks.find(function(t){return t.url==e.objDataNCM.link})||e.$refs.listLinks.eAddURL(e.objDataNCM.link),e.objDataNCM.isPop=!1}}),computed:l(l(l({},n.b),Object(i.mapGetters)(["contentCategoryList"])),c.mapState({formState:function(t){return t.formState}})),mounted:function(){Object(r.a)(this),Object(n.d)(this)}},c=(a("1179"),a("c701")),i=Object(c.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dr-contentForm",class:e.classObj},[a("div",{staticClass:"main-container"},[a("ContentForm",{attrs:{nameMod:e.nameMod},scopedSlots:e._u([{key:"leftTop",fn:function(){return[a("el-form-item",{attrs:{label:e.$t(e.nameMod+".name"),prop:"name"}},[a("el-input",{ref:"inputName",attrs:{size:"small",maxlength:"50","show-word-limit":""},model:{value:e.formState.formData.name,callback:function(t){e.$set(e.formState.formData,"name",t)},expression:"formState.formData.name"}},[a("el-tooltip",{attrs:{slot:"append",content:"尝试搜索网易云音乐",placement:"top",effect:"light"},slot:"append"},[a("el-button",{attrs:{type:"success",plain:"",disabled:!e.formState.formData.name,icon:"el-icon-cloudy"},on:{click:function(t){return t.preventDefault(),e.eBnFetchNCM(t)}}},[e._v("搜索网易云音乐")])],1)],1)],1)]},proxy:!0},{key:"leftMiddle",fn:function(){return[e.formState.formData?a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{gutter:40,type:"flex",justify:"space-between"}},[a("el-col",{attrs:{lg:16}},[a("el-form-item",{attrs:{prop:"listDateDur"}},[a("el-row",{staticStyle:{"flex-wrap":"nowrap","min-width":"min-content","max-width":"fit-content"},attrs:{gutter:5,type:"flex",justify:"space-around",align:"middle"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{type:"date",span:12,placeholder:"加入日期"},model:{value:e.formState.formData.listDateDur[0],callback:function(t){e.$set(e.formState.formData.listDateDur,0,t)},expression:"formState.formData.listDateDur[0]"}})],1),a("el-col",{staticStyle:{"min-width":"min-content"},attrs:{span:1}},[a("icon",{staticClass:"el-icon-minus"})],1),a("el-col",{attrs:{span:11}},[a("el-date-picker",{attrs:{span:12,type:"date",placeholder:"退出日期"},model:{value:e.formState.formData.listDateDur[1],callback:function(t){e.$set(e.formState.formData.listDateDur,1,t)},expression:"formState.formData.listDateDur[1]"}})],1)],1)],1)],1),a("el-col",{staticStyle:{"min-width":"min-content"},attrs:{lg:8}},[a("el-form-item",{attrs:{prop:"from"}},[a("el-input",{attrs:{placeholder:"中国/China",maxlength:"20","show-word-limit":""},model:{value:e.formState.formData.from,callback:function(t){e.$set(e.formState.formData,"from",t)},expression:"formState.formData.from"}},[a("template",{slot:"suffix"},[e._v(e._s(e.$t(e.nameMod+".from")))])],2)],1)],1)],1):e._e(),a("SelectIds",{attrs:{label:e.$t(e.nameMod+".listMembers"),listIds:e.formState.formData.listMembers,nameMode:e.nameMod,apiAdd:"/manage/regUser/addOneName",apiFind:"/manage/regUser/findByName",initTag:e.createMember},on:{change:e.eChangeMember}})]},proxy:!0},{key:"footer",fn:function(){return[a("ListURL",{ref:"listLinks",attrs:{label:"其他链接"},model:{value:e.formState.formData.listLinks,callback:function(t){e.$set(e.formState.formData,"listLinks",t)},expression:"formState.formData.listLinks"}}),a("ListURL",{attrs:{label:"热门歌曲"},model:{value:e.formState.formData.listHotMusics,callback:function(t){e.$set(e.formState.formData,"listHotMusics",t)},expression:"formState.formData.listHotMusics"}})]},proxy:!0}]),model:{value:e.formState,callback:function(t){e.formState=t},expression:"formState"}})],1),a("el-dialog",{attrs:{title:"网易云音乐搜索结果",width:"80%",visible:e.objDataNCM.isPop},on:{"update:visible":function(t){return e.$set(e.objDataNCM,"isPop",t)}}},[a("el-image",{attrs:{src:e.objDataNCM.sImg,fit:e.contain,span:24}}),a("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(e.objDataNCM.nameNCM)+"("+e._s(e.objDataNCM.alias||"无别名")+")："),a("a",{attrs:{href:e.objDataNCM.link,target:"_blank"}},[e._v(e._s(e.objDataNCM.link))])]),a("div",{staticStyle:{padding:"14px"}},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("简介")]),a("div",{staticStyle:{"max-height":"100px",overflow:"overlay","text-overflow":"ellipsis"}},[e._v(e._s(e.objDataNCM.discription))]),a("el-divider",{attrs:{"content-position":"left"}},[e._v("详细介绍")]),a("div",{staticStyle:{"max-height":"100px",overflow:"overlay","text-overflow":"ellipsis"}},[e._v(e._s(e.objDataNCM.comments))])],1),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.objDataNCM.isPop=!1}}},[e._v("忽 略")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.eBnSetNcm}},[e._v("使 用")])],1)],1)],1)},[],!1,null,null,null);e.default=i.exports},"330f":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var e=a("e04f"),o=a.n(e);function r(t){var e=o.a.get("sidebarStatus");t.sidebarOpened="1"==e,t.sidebar&&(t.sidebar.opened=t.sidebarOpened)}function n(e){var t=e.$root;setTimeout(function(){r(e)},500),t&&t.eventBus&&(t.eventBus.$on("toggleSideBar",function(t){setTimeout(function(){r(e)},500)}),t.eventBus.$on("toggleDevice",function(t){e.device=t}));t=document.body.getBoundingClientRect();e.device=t.width-1<992?"mobile":"desktop"}},"84bb":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".demo-ruleForm{margin:15px 0;width:80%;padding-bottom:50px}.demo-ruleForm .post-rate .el-rate{margin-top:10px}.demo-ruleForm .dr-submitContent{position:fixed;z-index:9999999;padding:10px 30px;text-align:right;right:0;bottom:0;background:none;margin-bottom:0}.demo-ruleForm .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.demo-ruleForm .avatar-uploader .el-upload:hover{border-color:#409eff}.demo-ruleForm .avatar-uploader-icon{font-size:28px;color:#8c939d;width:200px;height:150px;line-height:150px;text-align:center}.demo-ruleForm .avatar{width:200px;height:158px;display:block}.demo-ruleForm .upSimg{position:relative}.demo-ruleForm .upSimg .refresh-btn{position:absolute;left:220px;top:0}.demo-ruleForm .upSimg .refresh-btn i{font-weight:400}.demo-ruleForm .el-range-editor.el-input__inner{width:100%}.demo-ruleForm .el-select-suffix{width:0;overflow:visible}.demo-ruleForm .el-select-suffix .el-input__suffix-inner{position:absolute;right:100%;white-space:nowrap;background-color:#fff;background-clip:content-box;border:2px solid transparent;max-height:-webkit-fill-available}",""])},c100:function(t,e,a){"use strict";a.d(e,"f",function(){return o}),a.d(e,"c",function(){return i}),a.d(e,"a",function(){return s}),a.d(e,"d",function(){return l}),a.d(e,"e",function(){return c}),a.d(e,"b",function(){return m});var e=a("ac50"),e=a("873e"),e=a("5c10"),r=a("0e2e"),e=a("0bbd"),e=a("9736"),n=a("79b1"),e=a("6e69"),e=a("196d"),o={groups:Array},i={nameMod:nameMod,contentState:[{value:"0",label:"撤回",color:""},{value:"1",label:"草稿",color:"#409EFF"},{value:"2",label:"发布",color:"#67C23A"}]},s={VueUeditorWrap:a.n(e).a,ListURL:function(){return a.e("chunk-0b4b1713").then(a.bind(null,"33b5"))},LinkWX:function(){return a.e("chunk-1f26a45d").then(a.bind(null,"1f3f"))},Cropper:function(){return Promise.all([a.e("chunk-15110fde"),a.e("chunk-d495c8f6")]).then(a.bind(null,"66ff"))},SelectIds:function(){return a.e("chunk-5b0a2f76").then(a.bind(null,"6d92"))}};function l(o){var e;o.$route.params.id?Object(n.b)({id:o.$route.params.id},o.nameMod).then(function(t){var e,a;200===t.status?t.data?(e=t.data,a=[],e.categories&&(e.categories.map(function(t,e){t&&a.push(t._id)}),e.categories=a),e.tags&&(e.tags=e.tags.map(function(t){return t&&t._id})),e.keywords&&(e.keywords=e.keywords.join()),e.listRefs&&(e.listRefs=e.listRefs.map(function(t){return t._id})),e.listMembers&&(e.listMembers=e.listMembers.map(function(t){return t._id})),e.listFormatTags&&(e.listFormatTags=e.listFormatTags.map(function(t){return t&&t._id})),o.showContentForm({edit:!0,formData:e})):o.$message({message:o.$t("validate.error_params"),type:"warning",onClose:function(){o.backToList()}}):o.$message.error(t.message)}).catch(function(t){debugger}):(e=o.getLocalContents(),_.isEmpty(e)?o.showContentForm({edit:!1}):o.$confirm(o.$t("main.askForReInputContent"),o.$t("main.scr_modal_title"),{confirmButtonText:o.$t("main.confirmBtnText"),cancelButtonText:o.$t("main.cancelBtnText"),type:"warning"}).then(function(){var t=e.comments||"";o.$refs.ueditor.setContent(t),localStorage.removeItem(o.$route.path.split("/")[1]),o.showContentForm({edit:!1,formData:e})}).catch(function(){localStorage.removeItem(o.$route.path.split("/")[1]),o.$message({type:"info",message:o.$t("main.scr_modal_del_error_info")})})),o.$store.dispatch("contentCategory/getContentCategoryList")}var c={updateKeywords:function(t,e){var a=1<arguments.length&&void 0!==e&&e,e=this.formState.formData.keywords.split(","),o=[];return t&&""!=t&&t instanceof String&&(o=[t]),t&&0<t.length&&t instanceof Array&&(o=(o=t.filter(function(t){return t&&t.name||t instanceof String})).map(function(t){return t.name||t})),a?e=e.filter(function(t){return-1===o.indexOf(t)}):e.push.apply(e,Object(r.a)(o)),e=Object(r.a)(new Set(e)),this.formState.formData.keywords=e.join(),this.formState.formData.keywords},getLocalContents:function(){var t=localStorage.getItem("addContent")||"";return t?JSON.parse(t):{}},editorReady:function(t){this.ueditorObj=t},backToList:function(){this.$router.push(this.$root.adminBasePath+"/"+this.nameMod)},submitForm:function(t,e){var e=1<arguments.length&&void 0!==e?e:"",a=this;""!=e&&(a.formState.formData.state=e),this.$refs[t].validate(function(t){if(!t)return!1;t=Object.assign({},a.formState.formData,{comments:a.ueditorObj.getContent(),simpleComments:a.ueditorObj.getPlainTxt()});a.formState.edit?Object(n.f)(t,a.nameMod).then(function(t){200===t.status?(localStorage.removeItem(a.$route.path.split("/")[1]),a.backToList(),a.$message({message:a.$t("main.updateSuccess"),type:"success"})):a.$message.error(t.message)}).catch(function(t){debugger;a.$message.error(JSON.stringify(t))}):Object(n.a)(t,a.nameMod).then(function(t){200===t.status?(localStorage.removeItem(a.$route.path.split("/")[1]),a.backToList(),a.$message({message:a.$t("main.addSuccess"),type:"success"})):a.$message.error(t.message)}).catch(function(t){a.$message.error(t.message)})})}},m={classObj:function(){return{hideSidebar:!this.sidebarOpened,openSidebar:this.sidebarOpened,withoutAnimation:"false",mobile:"mobile"===this.device}},device:function(){return document.body.getBoundingClientRect().width-1<992?"mobile":"desktop"}}},d7ce:function(t,e,a){var o=a("84bb");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,a("85cb").default)("839b9e48",o,!0,{sourceMap:!1,shadowMode:!1})}}]);