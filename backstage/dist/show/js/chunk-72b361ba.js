(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-72b361ba"],{"1adb":function(t,e){t.exports={imgFit:function(c,l,d){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"cover";return new Promise(function(e,t){var s,a=document.createElement("canvas"),i=a.getContext("2d");a.width=l,a.height=d;var r=1;"cover"==u&&(r=Math.max(a.width/c.width,a.height/c.height)),"fill"==u&&(r=Math.min(a.width/c.width,a.height/c.height));var o=a.width/2-c.width/2*r,n=a.height/2-c.height/2*r;i.drawImage(c,o,n,c.width*r,c.height*r),a.toBlob(function(t){s=URL.createObjectURL(t),e({src:s,blob:t})},c.type||"image/jpeg")})}}},"1f3f":function(t,e,s){"use strict";s.r(e);s("388c"),s("9736");var i=s("1adb"),a={props:{value:{type:Object,default:{}}},data:function(){return{strURLWX:"",objRes:{sImg:"",title:"",date:"",comments:""},objResDefault:{sImg:"",title:"",date:"",comments:""},isDialog:!1,isLoading:!1,listSrcImgWX:[]}},computed:{},components:{},methods:{eClickSImg:function(t){this.$set(this.objRes,"sImg",t.currentTarget.attributes["data-src"].value)},errURL:function(t){var e=this;e.strErrMsg=t,e.isLoading=!1,t&&e.$message.error(e.strErrMsg)},eInputURL:function(){var e=this,t=e.$refs.inputURL.value;t?(t=t.split("mp.weixin.qq.com/s?")[1])?(e.isLoading=!0,fetch("/api/content/fetchWX?"+t).then(function(t){return t.text()}).then(function(t){e.isLoading=!1;t=JSON.parse(t)||{};t&&200==t.status&&t.data&&t.data.title&&t.data.comments?(e.$message({message:"找到公帐号文章，自动填充："+t.data.title,type:"success"}),Object.assign(e.objRes,t.data),e.objRes.stitle=t.data.title,e.listSrcImgWX=t.data.listSrcImg,e.objRes.listSrcImg=t.data.listSrcImg.map(function(t){return t.replace("https://mmbiz.qpic.cn","/getWXImg")}),e.isDialog=!0):e.errURL(t.message)}).catch(function(t){debugger;e.errURL(t.message)})):e.errURL("文章地址不正确"):e.errURL("")},submitUpload:function(){Object.assign(this.value,this.objRes),this.value&&this.value.title&&this.value.comments&&this.$emit("input",this.value),this.handleClose()},handleClose:function(t){this.isLoading=!1,this.strErrMsg="",Object.assign(this.objRes,this.objResDefault),this.isDialog=!1},eImgLoaded:function(t){var e=t.target;e.removeEventListener("load",this.eImgLoaded);var s=e.naturalWidth,a=e.naturalHeight,t=e.src.substring(0,7);-1==t.indexOf("blob")&&(new Date,e.src,e.type="image/jpeg",Object(i.imgFit)(e,s,a).then(function(t){e.srcOrg=e.src,e.src=t.src,e.blob=t.blob;debugger}))}}},s=(s("3dc4"),s("5d22")),a=Object(s.a)(a,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-tooltip",{attrs:{content:"输入公众号文章链接",placement:"top",effect:"light"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:s.isLoading,expression:"isLoading"}],ref:"inputURL",attrs:{size:"small"},on:{change:s.eInputURL},model:{value:s.strURLWX,callback:function(t){s.strURLWX=t},expression:"strURLWX"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[s._v("https://")]),a("el-button",{attrs:{slot:"append",type:"success",plain:"",icon:"el-icon-cloudy"},on:{click:function(t){return t.preventDefault(),s.eInputURL(t)}},slot:"append"},[s._v("读 取")])],1)],1),s.strErrMsg?a("div",{staticClass:"el-upload__tip"},[s._v(s._s(s.strErrMsg))]):s._e(),a("el-dialog",{attrs:{xs:20,title:"读取结果",width:"80%",top:"5vh","close-on-click-modal":!0,visible:s.isDialog,"before-close":s.handleClose},on:{"update:visible":function(t){s.isDialog=t}}},[a("div",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[a("h2",[s._v(s._s(s.objRes.title))]),a("em",[s._v(" "+s._s(s.objRes.date)+" ")])]),a("div",{staticClass:"article",domProps:{innerHTML:s._s(s.objRes.comments)}}),a("el-divider",{attrs:{"content-position":"left"}},[s._v("请选择主形象图")]),a("div",{staticClass:"groupSelectorImg"},s._l(s.listSrcImgWX,function(t,e){return a("div",{key:e,staticClass:"selectorImg",class:s.objRes.sImg==t?"selected":"",attrs:{"data-src":t},on:{click:s.eClickSImg}},[a("el-tooltip",{attrs:{effect:"dark",content:s.objRes.sImg==t?"作为主图":"",value:s.objRes.sImg==t,placement:"top",manual:""}},[a("img",{staticClass:"imgSelectSImg",attrs:{src:s.objRes.listSrcImg[e],fit:"cover"},on:{load:s.eImgLoaded}})])],1)}),0),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:s.handleClose}},[s._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:s.submitUpload}},[s._v("使 用")])],1)],1)],1)},[],!1,null,"60cc2744",null);e.default=a.exports},"388c":function(t,e,s){"use strict";var R=s("d407"),L=s("0345"),j=s("a323"),S=s("ca37"),_=s("61cd"),k=s("b57d"),U=Math.max,y=Math.min,C=Math.floor,M=/\$([$&`']|\d\d?|<[^>]*>)/g,$=/\$([$&`']|\d\d?)/g;s("82fb")("replace",2,function(i,r,I,w){return[function(t,e){var s=i(this),a=null==t?void 0:t[r];return void 0!==a?a.call(t,s,e):I.call(String(s),t,e)},function(t,e){var s=w(I,t,this,e);if(s.done)return s.value;var a=R(t),i=String(this),r="function"==typeof e;r||(e=String(e));var o,n=a.global;n&&(o=a.unicode,a.lastIndex=0);for(var c=[];;){var l=k(a,i);if(null===l)break;if(c.push(l),!n)break;""===String(l[0])&&(a.lastIndex=_(i,j(a.lastIndex),o))}for(var d,u="",g=0,p=0;p<c.length;p++){l=c[p];for(var h=String(l[0]),m=U(y(S(l.index),i.length),0),v=[],f=1;f<l.length;f++)v.push(void 0===(d=l[f])?d:String(d));var b,x=l.groups,x=r?(b=[h].concat(v,m,i),void 0!==x&&b.push(x),String(e.apply(void 0,b))):function(r,o,n,c,l,t){var d=n+r.length,u=c.length,e=$;void 0!==l&&(l=L(l),e=M);return I.call(t,e,function(t,e){var s;switch(e.charAt(0)){case"$":return"$";case"&":return r;case"`":return o.slice(0,n);case"'":return o.slice(d);case"<":s=l[e.slice(1,-1)];break;default:var a=+e;if(0==a)return t;if(u<a){var i=C(a/10);return 0===i?t:i<=u?void 0===c[i-1]?e.charAt(1):c[i-1]+e.charAt(1):t}s=c[a-1]}return void 0===s?"":s})}(h,i,m,v,x,e);g<=m&&(u+=i.slice(g,m)+x,g=m+h.length)}return u+i.slice(g)}]})},"3dc4":function(t,e,s){"use strict";s("8297")},8297:function(t,e,s){var a=s("dbc4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,s("85cb").default)("6c9a2eee",a,!0,{sourceMap:!1,shadowMode:!1})},dbc4:function(t,e,s){(t.exports=s("690e")(!1)).push([t.i,".article[data-v-60cc2744]{max-height:50vh;overflow-y:scroll;overflow-x:hidden;border:1px dashed #909399;border-radius:.5em;padding:10px 20px;margin-bottom:60px}.el-upload__tip[data-v-60cc2744]{color:#f56c6c}.el-divider__text[data-v-60cc2744]{color:#67c23a}.groupSelectorImg[data-v-60cc2744]{-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:20px;border:1px dashed #909399;border-radius:.5em;padding:20px 10px}.groupSelectorImg[data-v-60cc2744],.selectorImg[data-v-60cc2744]{display:-webkit-box;display:-ms-flexbox;display:flex}.selectorImg[data-v-60cc2744]{padding:10px;border:1px dashed #909399;width:120px;height:120px;margin:5px 5px;border-radius:.25em}.selectorImg.selected[data-v-60cc2744]{border:2px solid #409eff}.selectorImg .imgSelectSImg[data-v-60cc2744]{width:100px;height:100px}",""])}}]);