(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-243af39c"],{"06f4":function(t,e,i){var n=i("fd96");t.exports=function(t,e){return new(n(t))(e)}},5598:function(t,e,i){"use strict";i("8779")},"6d92":function(t,e,i){"use strict";i.r(e);i("0bbd"),i("873e"),i("5c10");var a=i("0e2e"),l=(i("ac50"),i("b589"),i("250d")),n={props:{nameMod:{type:String,default:"rubyeyes"},label:{type:String,default:"标签"},listIds:{type:Array,default:[]},apiFind:{type:String,default:"/manage/contentTag/getList"},allowCreate:{type:Boolean,default:!0},apiAdd:{type:String,default:"/manage/contentTag/addOne"},initTag:{type:Function,default:function(t){return{name:t,comments:"即时创建",alias:t}}}},data:function(){return{userLoading:!1,listAllTags:[]}},watch:{listIds:function(e,i){var n=this,t=(e=e||[]).concat(i=i||[]).filter(function(t){return-1===i.indexOf(t)||-1===e.indexOf(t)}),s=0<t.length,a=s&&e.length>i.length,l=!0,t=(t=t.map(function(e){var t=n.listAllTags.find(function(t){return t._id==e});if(!t){if(!a)return!1;l=!1}return t})).filter(function(t){return t});s&&l&&(a&&this.$emit("add",{listObjDiff:t,listIds:e}),a||this.$emit("delete",{listObjDiff:t,listIds:e}),this.$emit("change",{listObjDiff:t,listIds:e,strAction:a?"add":"delete"}))}},computed:{},methods:{eChangeTags:function(t){var s=this;this.listIds.forEach(function(e,t,i){if(e){var n=s.listAllTags.find(function(t){return t._id==e});if(!!n)e&&""!=e&&s.listIds.push(n._id),s.listIds=Object(a.a)(new Set(s.listIds));else{if(!(s.apiAdd&&s.allowCreate&&s.initTag))return!1;s.addTag(s.initTag(e))}}else s.$message.error("标签undefined：",e)})},addTag:function(i){var n=this,s=this;if(!s.apiAdd||!s.allowCreate||!s.initTag)return!1;s.loadingTag=!0,Object(l.a)({url:s.apiAdd,data:i,method:"post"}).then(function(t){var e;200===t.status&&t.data._id?(t.data&&s.listAllTags.unshift(t.data),-1!=(e=s.listIds.indexOf(i.name))?s.listIds[e]=t.data._id:s.listIds=s.clearListIdTags(),n.$emit("change",{listObjDiff:[t.data],listIds:s.listIds,strAction:"add"}),s.$message({message:s.$t("main.addSuccess"),type:"success"})):s.$message.error("添加标签错误："+t.message,i)}).catch(function(t){debugger;s.$message.error("添加标签错误："+t,i)}).finally(function(){s.loadingTag=!1})},findTags:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=this;this.userLoading=!0,Object(l.a)({url:i.apiFind,params:{pageSize:0,isPaging:"0",searchkey:e||null},method:"get"}).then(function(t){if(200==t.status){var e=t.data.docs||t.data||[];0<e.length&&(i.listAllTags=Object(a.a)(new Set(i.listAllTags.concat(e))),i.$emit("loaded",{listAllTags:i.listAllTags}))}else{debugger;i.$message.error("检索标签错误：status="+t.status,t)}}).catch(function(t){debugger}).finally(function(){t.userLoading=!1})},clearListIdTags:function(){var s=this;return this.listIds.filter(function(e,t,i){var n=!!s.listAllTags.find(function(t){return t._id==e});return n})}},mounted:function(){this.findTags()}},i=(i("5598"),i("5d22")),n=Object(i.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form-item",{attrs:{prop:"listIds"}},[i("el-select",{attrs:{span:"24",multiple:"",filterable:"","allow-create":"","default-first-option":"",loading:e.userLoading,placeholder:e.$t("validate.selectNull",{label:this.label})},on:{change:e.eChangeTags},model:{value:e.listIds,callback:function(t){e.listIds=t},expression:"listIds"}},e._l(e.listAllTags,function(t){return i("el-option",{key:t._id,attrs:{label:t.name,value:t._id,disabled:t.isHide}})}),1),i("div",{staticClass:"el-select-suffix el-input--small el-input__suffix"},[i("span",{staticClass:" el-input__suffix-inner"},[e._v(e._s(e.label))])])],1)},[],!1,null,null,null);e.default=n.exports},"6ec2":function(t,e,i){var n=i("8132");t.exports=Array.isArray||function(t){return"Array"==n(t)}},8779:function(t,e,i){var n=i("ef08");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("85cb").default)("84631616",n,!0,{sourceMap:!1,shadowMode:!1})},b589:function(t,e,i){"use strict";var n=i("c51c"),s=i("da31")(5),a="find",l=!0;a in[]&&Array(1)[a](function(){l=!1}),n(n.P+n.F*l,"Array",{find:function(t){return s(this,t,1<arguments.length?arguments[1]:void 0)}}),i("d263")(a)},da31:function(t,e,i){var T=i("e760"),y=i("e7d3"),A=i("0345"),w=i("a323"),n=i("06f4");t.exports=function(c,t){var f=1==c,g=2==c,p=3==c,h=4==c,m=6==c,v=5==c||m,b=t||n;return function(t,e,i){for(var n,s,a=A(t),l=y(a),r=T(e,i,3),d=w(l.length),u=0,o=f?b(t,d):g?b(t,0):void 0;u<d;u++)if((v||u in l)&&(s=r(n=l[u],u,a),c))if(f)o[u]=s;else if(s)switch(c){case 3:return!0;case 5:return n;case 6:return u;case 2:o.push(n)}else if(h)return!1;return m?-1:p||h?h:o}}},ef08:function(t,e,i){(t.exports=i("690e")(!1)).push([t.i,".el-select{width:100%}.el-select-suffix{width:0;overflow:visible}.el-select-suffix .el-input__suffix-inner{position:absolute;right:100%;white-space:nowrap}",""])},fd96:function(t,e,i){var n=i("467c"),s=i("6ec2"),a=i("6b42")("species");t.exports=function(t){var e;return s(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!s(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}}}]);