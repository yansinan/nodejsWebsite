(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a46c6baa"],{"04e6":function(t,e,o){(t.exports=o("690e")(!1)).push([t.i,".demo-ruleForm{margin:15px 0;width:80%;padding-bottom:50px}.demo-ruleForm .post-rate .el-rate{margin-top:10px}.demo-ruleForm .dr-submitContent{position:fixed;z-index:9999999;padding:10px 30px;text-align:right;right:0;bottom:0;background:none;margin-bottom:0}.demo-ruleForm .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.demo-ruleForm .avatar-uploader .el-upload:hover{border-color:#409eff}.demo-ruleForm .avatar-uploader-icon{font-size:28px;color:#8c939d;width:200px;height:150px;line-height:150px;text-align:center}.demo-ruleForm .avatar{width:200px;height:158px;display:block}.demo-ruleForm .upSimg{position:relative}.demo-ruleForm .upSimg .refresh-btn{position:absolute;left:220px;top:0}.demo-ruleForm .upSimg .refresh-btn i{font-weight:400}.demo-ruleForm .el-autocomplete,.demo-ruleForm .el-range-editor.el-input__inner,.demo-ruleForm .el-select{width:100%}.demo-ruleForm .el-select-suffix{width:0;overflow:visible}.demo-ruleForm .el-select-suffix .el-input__suffix-inner{position:absolute;right:100%;white-space:nowrap;background-color:#fff;background-clip:content-box;border:2px solid transparent;max-height:-webkit-fill-available}",""])},1179:function(t,e,o){"use strict";o("53f5")},1953:function(t,e,o){"use strict";o.r(e);o("ac67"),o("32ea"),o("e5b4"),o("1bc7");var r=o("34f5"),n=(o("6e69"),o("330f")),a=o("c100"),i=(o("60bb"),o("5880"));function s(e,t){var o,r=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)),r}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach(function(t){Object(r.a)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var l=Object(i.createNamespacedHelpers)(nameMod),i={props:c({},a.f),data:function(){return{nameMod:nameMod}},components:c(c({},a.a),{},{ContentForm:function(){return o.e("chunk-2399d314").then(o.bind(null,"46d4"))}}),methods:c(c({},l.mapActions(["showContentForm"])),{},{backToList:a.e.backToList,updateKeywords:a.e.updateKeywords,getLocalContents:a.e.getLocalContents,eChangeArtist:function(t){var r=this;this.formState.formData.listRefs=t.listIds,this.updateKeywords(t.listObjDiff,"delete"==t.strAction);var n=this.listAllTags;n&&this.formState.formData.listRefs.forEach(function(e){var o=n.find(function(t){return t.objRef&&t.objRef.id==e});o&&(r.formState.formData.tags.find(function(t){return t==o._id})||r.formState.formData.tags.push(o._id))})},eListHotMusicChanged:function(t){if(!t)return this.isValidate=!1,void this.$message.error(this.$t("validate.inputCorrect",{label:"热门歌曲链接"}));this.formState.formData.listHotMusics=t}}),computed:c(c(c(c({},a.b),Object(i.mapGetters)(["contentCategoryList"])),l.mapState({formState:function(t){return t.formState},dataArtists:function(t){return t.dataArtists}})),{},{listAllTags:function(){return this.$refs.contentForm.listAllTags||[]}}),mounted:function(){Object(n.a)(this),Object(a.d)(this)}},l=(o("1179"),o("5d22")),i=Object(l.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dr-contentForm",class:e.classObj},[o("div",{staticClass:"main-container"},[o("ContentForm",{ref:"contentForm",attrs:{nameMod:e.nameMod},scopedSlots:e._u([{key:"top",fn:function(){return[e.formState.edit?e._e():o("el-form-item",{attrs:{label:"公众号文章链接"}},[o("LinkWX",{model:{value:e.formState.formData,callback:function(t){e.$set(e.formState,"formData",t)},expression:"formState.formData"}})],1)]},proxy:!0},{key:"leftMiddle",fn:function(){return[e.formState.formData?o("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{gutter:40,type:"flex",justify:"space-between"}},[o("el-col",{staticStyle:{"min-width":"min-content"},attrs:{lg:15}},[o("el-form-item",{attrs:{prop:"listDateDur"}},[o("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},on:{change:e.eChangeDate},model:{value:e.formState.formData.listDateDur,callback:function(t){e.$set(e.formState.formData,"listDateDur",t)},expression:"formState.formData.listDateDur"}})],1)],1),o("el-col",{staticStyle:{"min-width":"min-content"},attrs:{lg:8}},[o("el-form-item",{attrs:{prop:"location"}},[o("el-input",{attrs:{placeholder:"",maxlength:"10"},model:{value:e.formState.formData.location,callback:function(t){e.$set(e.formState.formData,"location",t)},expression:"formState.formData.location"}},[o("template",{slot:"suffix"},[e._v(e._s(e.$t(e.nameMod+".location")))])],2)],1)],1)],1):e._e(),e.formState.formData?o("SelectIds",{attrs:{label:e.$t(e.nameMod+".listArtists"),"allow-create":!1,listIds:e.formState.formData.listRefs,nameMode:e.nameMod,apiAdd:!1,apiFind:"/manage/artist/getList",initTag:!1},on:{change:e.eChangeArtist}}):e._e()]},proxy:!0},{key:"footer",fn:function(){return[o("ListURL",{ref:"listTicketLink",attrs:{label:"购买链接"},model:{value:e.formState.formData.listTicketLink,callback:function(t){e.$set(e.formState.formData,"listTicketLink",t)},expression:"formState.formData.listTicketLink"}})]},proxy:!0}]),model:{value:e.formState,callback:function(t){e.formState=t},expression:"formState"}})],1)])},[],!1,null,null,null);e.default=i.exports},"330f":function(t,e,o){"use strict";o.d(e,"a",function(){return a});var e=o("e04f"),r=o.n(e);function n(t){var e=r.a.get("sidebarStatus");t.sidebarOpened="1"==e,t.sidebar&&(t.sidebar.opened=t.sidebarOpened)}function a(e){var t=e.$root;setTimeout(function(){n(e)},500),t&&t.eventBus&&(t.eventBus.$on("toggleSideBar",function(t){setTimeout(function(){n(e)},500)}),t.eventBus.$on("toggleDevice",function(t){e.device=t}));t=document.body.getBoundingClientRect();e.device=t.width-1<992?"mobile":"desktop"}},"53f5":function(t,e,o){var r=o("04e6");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,o("85cb").default)("42fa9bfc",r,!0,{sourceMap:!1,shadowMode:!1})},c100:function(t,e,o){"use strict";o.d(e,"f",function(){return i}),o.d(e,"c",function(){return s}),o.d(e,"a",function(){return c}),o.d(e,"d",function(){return l}),o.d(e,"e",function(){return d}),o.d(e,"b",function(){return u});var e=o("ac50"),e=o("873e"),e=o("5c10"),n=o("0e2e"),e=o("0bbd"),e=o("9736"),a=o("79b1"),e=o("6e69"),r=o("e9d9"),e=o("196d"),i={groups:Array},s={nameMod:nameMod,contentState:[{value:"0",label:"撤回",color:""},{value:"1",label:"草稿",color:"#409EFF"},{value:"2",label:"发布",color:"#67C23A"}],sidebarOpened:!0,device:"desktop"},c={VueUeditorWrap:o.n(e).a,ListURL:function(){return o.e("chunk-0b4b1713").then(o.bind(null,"33b5"))},LinkWX:function(){return o.e("chunk-017bf9d6").then(o.bind(null,"1f3f"))},Cropper:function(){return Promise.all([o.e("chunk-9e3cc28e"),o.e("chunk-672af0a4")]).then(o.bind(null,"66ff"))},SelectIds:function(){return o.e("chunk-243af39c").then(o.bind(null,"6d92"))}};function l(r){var e;r.$route.params.id?Object(a.b)({id:r.$route.params.id},r.nameMod).then(function(t){var e,o;200===t.status?t.data?(e=t.data,o=[],e.categories&&(e.categories.map(function(t,e){t&&o.push(t._id)}),e.categories=o),e.tags&&(e.tags=e.tags.map(function(t){return t&&t._id})),e.keywords&&(e.keywords=e.keywords.join()),e.listRefs&&(e.listRefs=e.listRefs.map(function(t){return t._id})),e.listMembers&&(e.listMembers=e.listMembers.map(function(t){return t._id})),e.listFormatTags&&(e.listFormatTags=e.listFormatTags.map(function(t){return t&&t._id})),r.showContentForm({edit:!0,formData:e})):r.$message({message:r.$t("validate.error_params"),type:"warning",onClose:function(){r.backToList()}}):r.$message.error(t.message)}).catch(function(t){debugger}):(e=r.getLocalContents(),_.isEmpty(e)?r.showContentForm({edit:!1}):r.$confirm(r.$t("main.askForReInputContent"),r.$t("main.scr_modal_title"),{confirmButtonText:r.$t("main.confirmBtnText"),cancelButtonText:r.$t("main.cancelBtnText"),type:"warning"}).then(function(){var t=e.comments||"";r.$refs.ueditor.setContent(t),localStorage.removeItem(r.$route.path.split("/")[1]),r.showContentForm({edit:!1,formData:e})}).catch(function(){localStorage.removeItem(r.$route.path.split("/")[1]),r.$message({type:"info",message:r.$t("main.scr_modal_del_error_info")})})),r.$store.dispatch("contentCategory/getContentCategoryList")}var d={updateKeywords:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=this.formState.formData.keywords.split(","),r=[];return t&&""!=t&&t instanceof String&&(r=[t]),t&&0<t.length&&t instanceof Array&&(r=(r=t.filter(function(t){return t&&t.name||t instanceof String})).map(function(t){return t.name||t})),e?o=o.filter(function(t){return-1===r.indexOf(t)}):o.push.apply(o,Object(n.a)(r)),o=Object(n.a)(new Set(o)),this.formState.formData.keywords=o.join(),this.formState.formData.keywords},getLocalContents:function(){var t=localStorage.getItem("addContent")||"";return t?JSON.parse(t):{}},editorReady:function(t){this.ueditorObj=t},backToList:function(){this.$router.push(this.$root.adminBasePath+"/"+this.nameMod)},submitForm:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=this;""!=e&&(o.formState.formData.state=e),this.$refs[t].validate(function(t){if(!t)return!1;t=Object.assign({},o.formState.formData,{comments:o.ueditorObj.getContent(),simpleComments:o.ueditorObj.getPlainTxt()});o.formState.edit?Object(a.f)(t,o.nameMod).then(function(t){200===t.status?(localStorage.removeItem(o.$route.path.split("/")[1]),o.backToList(),o.$message({message:o.$t("main.updateSuccess"),type:"success"})):o.$message.error(t.message)}).catch(function(t){debugger;o.$message.error(JSON.stringify(t))}):Object(a.a)(t,o.nameMod).then(function(t){200===t.status?(localStorage.removeItem(o.$route.path.split("/")[1]),o.backToList(),o.$message({message:o.$t("main.addSuccess"),type:"success"})):o.$message.error(t.message)}).catch(function(t){o.$message.error(t.message)})})},funForWordUpload:{handleWordRemove:function(t,e){},handleWordPreview:function(t){},handleWordExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeWordRemove:function(t,e){},uploadWordSuccess:function(t,e){Object(r.b)(),this.wordFileUrl=t.data||"";debugger;this.formState.formData.comments=t.data,this.$message({message:"恭喜，导入成功！",type:"success"})},beforeWordUpload:function(t){var e=!!(t.type.indexOf("officedocument")||t.name.indexOf(".doc")||0<t.name.indexOf(".docx")),t=t.size/1024/1024<5;return e||this.$message.error("只能上传docx,doc格式！"),t||this.$message.error(this.$t("validate.limitUploadImgSize",{size:5})),e&&t&&Object(r.a)(),e&&t}}},u={classObj:function(){return{hideSidebar:!this.sidebarOpened,openSidebar:this.sidebarOpened,withoutAnimation:"false",mobile:"mobile"===this.device}},device:function(){return document.body.getBoundingClientRect().width-1<992?"mobile":"desktop"}}}}]);