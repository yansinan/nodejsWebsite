(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-16250e40"],{"06f4":function(t,e,r){var n=r("fd96");t.exports=function(t,e){return new(n(t))(e)}},"07e7":function(t,e,r){function n(t,e,r,n){var i=String(a(t)),t="<"+e;return""!==r&&(t+=" "+r+'="'+String(n).replace(s,"&quot;")+'"'),t+">"+i+"</"+e+">"}var i=r("c51c"),o=r("603f"),a=r("0763"),s=/"/g;t.exports=function(e,t){var r={};r[e]=t(n),i(i.P+i.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},"33b5":function(t,e,r){"use strict";r.r(e);r("ac50"),r("873e"),r("5c10");var i=r("17eb"),o=(r("b589"),r("410e"),r("0bbd"),r("9736"),r("4c9b"),{name:"",url:"",icon:"",error:""}),n={props:{label:{type:String,default:"链接"},value:{type:Array,default:function(){return[]}}},data:function(){return{objToAdd:Object.assign({},o),strErrorAdd:"",strErrorUpdate:""}},computed:{listObjURL:function(){return this.value}},methods:{removeDomain:function(r){var t=this.listObjURL.findIndex(function(t,e){return t.url==r.url});-1!==t&&this.listObjURL.splice(t,1),this.listObjURL&&this.$emit("input",this.listObjURL)},getURLData:function(n,i){var o=this;return-1!=n.url.indexOf("weibo.com")&&(n.icon="/static/themes/images/link/logo_sina_32x32.png"),-1!=n.url.indexOf("douban.com")&&(n.icon="/static/themes/images/link/logo_douban_32x32.png"),-1!=n.url.indexOf("music.163.com")&&(n.icon="/static/themes/images/link/logo_163_32x32.png"),-1!=n.url.indexOf("music.163.com")?new Promise(function(e,r){var t;n.name="网易云音乐",-1!=n.url.indexOf("song?id=")?(n.type="音乐",n.name="歌曲名",t=n.url.split("song?id=")[1],fetch("/api/fetchNCMSong/"+t).then(function(t){return t.text()}).then(function(t){t=JSON.parse(t);200==t.status&&t.data.name?(n.name=t.data.name||t.data.songs[0].name,n.sImg=t.data.sImg,n.urlSong=t.data.urlSong,n.url=t.data.urlSong,n.urlSongNCM=t.data.urlSongNCM,o.$message({message:"找到网易云音乐歌曲信息，自动填充："+n.name,type:"success"})):(n.name="歌曲无效",o.$message.error(o.$t("validate.inputCorrect",{label:"网易云音乐获取歌曲名称"})),"formUpdate"==i&&(o.strErrorUpdate="未找到网易云音乐歌曲信息："+n.url),"formAdd"==i&&(o.strErrorAdd="未找到网易云音乐歌曲信息："+n.url)),e(n)}).catch(function(t){debugger;r(t)})):n.url.indexOf("music.163.com/#/artist?id=")?e(n):r({msg:"网易云音乐链接参数错误"+n.link,err:"链接错误",data:n})}):(-1!=n.url.indexOf("weibo.com")&&(n.name="微博"),-1!=n.url.indexOf("douban.com")&&(n.name="豆瓣小站"),Promise.resolve(n))},eAddURL:function(r){var e=this,n=this;this.objToAdd.url=r,this.$refs.formAdd.validate(function(t){return t?void n.getURLData(n.objToAdd,"formAdd").then(function(t){var e=n.listObjURL.find(function(t){return t.url==r});e?Object.assign(e,t):n.listObjURL.push(t),n.listObjURL=Object(i.a)(new Set(n.listObjURL)),n.objToAdd=Object.assign({},o),n.listObjURL&&n.$emit("input",n.listObjURL)}).catch(function(t){debugger;n.$message.error(n.$t("validate.inputCorrect",{label:"链接编辑"+r}))}):(e.$message.error(e.$t("validate.inputCorrect",{label:e.label})),!1)})}}},r=r("5d22"),n=Object(r.a)(n,function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",[i("el-form",{ref:"formUpdate",attrs:{model:n.listObjURL,"status-icon":"","inline-message":"true","label-width":"0px"}},n._l(n.listObjURL,function(e,r){return i("el-form-item",{key:e._id,attrs:{prop:"["+r+"].url",rules:{required:!0,type:"url",message:"请输入有效链接",trigger:"blur"},error:n.strErrorUpdate}},[i("el-input",{attrs:{disabled:""},on:{input:function(t){return n.eChangeURL({index:r,objLink:e})}},model:{value:e.url,callback:function(t){n.$set(e,"url",t)},expression:"domain.url"}},[i("template",{slot:"prepend"},["音乐"===e.type&&e.name?i("span",{staticStyle:{width:"120px"}},[n._v(n._s(e.name))]):e.icon?i("img",{staticClass:"img-circle",staticStyle:{width:"32px"},attrs:{src:e.icon}}):i("span",{staticStyle:{width:"120px","text-align":"center","font-size":"18px"}},[i("i",{staticClass:"el-icon-link"})])]),i("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(t){return t.preventDefault(),n.removeDomain(e)}},slot:"append"})],2)],1)}),1),i("el-form",{ref:"formAdd",attrs:{model:n.objToAdd,"status-icon":"","label-width":"0px"}},[i("el-form-item",{key:"add",attrs:{"inline-message":"true",prop:"url",rules:{required:!1,type:"url",message:"请输入有效链接",trigger:["change","input"]},error:n.strErrorAdd}},[i("el-input",{on:{change:n.eAddURL},model:{value:n.objToAdd.url,callback:function(t){n.$set(n.objToAdd,"url",t)},expression:"objToAdd.url"}},[i("template",{staticStyle:{color:"red"},slot:"suffix"},[n._v(n._s(n.label))])],2)],1)],1)],1)},[],!1,null,null,null);e.default=n.exports},"410e":function(t,e,r){"use strict";r("07e7")("link",function(e){return function(t){return e(this,"a","href",t)}})},"4c9b":function(t,e,r){"use strict";var n=r("c51c"),i=r("da31")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r("d263")(o)},"6ec2":function(t,e,r){var n=r("8132");t.exports=Array.isArray||function(t){return"Array"==n(t)}},b589:function(t,e,r){"use strict";var n=r("c51c"),i=r("da31")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r("d263")(o)},da31:function(t,e,r){var x=r("e760"),j=r("e7d3"),A=r("0345"),O=r("a323"),n=r("06f4");t.exports=function(d,t){var f=1==d,m=2==d,p=3==d,b=4==d,g=6==d,h=5==d||g,v=t||n;return function(t,e,r){for(var n,i,o=A(t),a=j(o),s=x(e,r,3),u=O(a.length),l=0,c=f?v(t,u):m?v(t,0):void 0;l<u;l++)if((h||l in a)&&(i=s(n=a[l],l,o),d))if(f)c[l]=i;else if(i)switch(d){case 3:return!0;case 5:return n;case 6:return l;case 2:c.push(n)}else if(b)return!1;return g?-1:p||b?b:c}}},fd96:function(t,e,r){var n=r("467c"),i=r("6ec2"),o=r("6b42")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}}}]);