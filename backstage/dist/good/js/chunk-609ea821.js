(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-609ea821"],{"019a":function(t,e,s){"use strict";s("66ac")},"1adb":function(t,e){t.exports={imgFit:function(c,l,d){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"cover";return new Promise(function(e,t){var s,a=document.createElement("canvas"),i=a.getContext("2d");a.width=l,a.height=d;var o=1;"cover"==u&&(o=Math.max(a.width/c.width,a.height/c.height)),"fill"==u&&(o=Math.min(a.width/c.width,a.height/c.height));var r=a.width/2-c.width/2*o,n=a.height/2-c.height/2*o;i.drawImage(c,r,n,c.width*o,c.height*o),a.toBlob(function(t){s=URL.createObjectURL(t),e({src:s,blob:t})},c.type||"image/jpeg")})}}},"44f4":function(t,e,s){var a=s("c51c"),c=s("d6c9"),l=s("c1be"),d=s("0e92"),u=s("e95f");a(a.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,s,a=l(t),i=d.f,o=c(a),r={},n=0;o.length>n;)void 0!==(s=i(a,e=o[n++]))&&u(r,e,s);return r}})},"66ac":function(t,e,s){var a=s("905a");(a="string"==typeof(a=a.__esModule?a.default:a)?[[t.i,a,""]]:a).locals&&(t.exports=a.locals);(0,s("5925").default)("403e16ea",a,!0,{sourceMap:!1,shadowMode:!1})},"905a":function(t,e,s){(t.exports=s("690e")(!1)).push([t.i,".article[data-v-0eea7b66]{max-height:50vh;overflow-y:scroll;overflow-x:hidden;border:1px dashed #909399;border-radius:.5em;padding:10px 20px;margin-bottom:60px}.el-upload__tip[data-v-0eea7b66]{color:#f56c6c}.el-divider__text[data-v-0eea7b66]{color:#67c23a}.groupSelectorImg[data-v-0eea7b66]{-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:20px;border:1px dashed #909399;border-radius:.5em;padding:20px 10px}.groupSelectorImg[data-v-0eea7b66],.selectorImg[data-v-0eea7b66]{display:-webkit-box;display:-ms-flexbox;display:flex}.selectorImg[data-v-0eea7b66]{padding:10px;border:1px dashed #909399;width:120px;height:120px;margin:5px 5px;border-radius:.25em}.selectorImg.selected[data-v-0eea7b66]{border:2px solid #409eff}.selectorImg .imgSelectSImg[data-v-0eea7b66]{width:100px;height:100px}",""])},ac46:function(t,e,s){var a=s("0345"),i=s("b185");s("bf69")("keys",function(){return function(t){return i(a(t))}})},bf69:function(t,e,s){var i=s("c51c"),o=s("983a"),r=s("603f");t.exports=function(t,e){var s=(o.Object||{})[t]||Object[t],a={};a[t]=e(s),i(i.S+i.F*r(function(){s(1)}),"Object",a)}},c685:function(t,e,s){"use strict";s.r(e);s("44f4"),s("ac50"),s("ac46");var a=s("c1a2"),i=(s("0bbd"),s("9736"),s("1adb"));function o(e,t){var s,a=Object.keys(e);return Object.getOwnPropertySymbols&&(s=Object.getOwnPropertySymbols(e),t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)),a}var r={props:{value:{type:Object,default:{}},api:{type:String,default:"/api/content/fetchWX"},urlKey:{type:String,default:"mp.weixin.qq.com/s?"}},data:function(){return{strURLWX:"",objRes:{sImg:"",title:"",date:"",comments:""},objResDefault:{sImg:"",title:"",date:"",comments:""},isDialog:!1,isLoading:!1,listSrcImgWX:[]}},computed:{},components:{},methods:{eClickSImg:function(t){this.$set(this.objRes,"sImg",t.currentTarget.attributes["data-src"].value)},errURL:function(t){this.strErrMsg=t,this.isLoading=!1,t&&this.$message.error(this.strErrMsg)},eInputURL:function(){var e=this,t=e.$refs.inputURL.value;t?(t=t.split(e.urlKey)[1])?(e.isLoading=!0,fetch(e.api+"?"+t).then(function(t){return t.text()}).then(function(t){e.isLoading=!1;t=JSON.parse(t)||{};t&&200==t.status&&t.data&&t.data.title&&t.data.comments?(e.$message({message:"找到文章，自动填充："+t.data.title,type:"success"}),Object.assign(e.objRes,t.data),e.objRes.name=e.objRes.name||e.objRes.title,e.objRes.alias=t.data.name||t.data.title,e.objRes.stitle=e.objRes.alias,e.objRes.discription=t.data.name||t.data.title,e.objRes.date=e.objRes.date||new Date,e.listSrcImgWX=t.data.listSrcImg,e.$set(e.objRes,"sImg",t.data.sImg||e.objRes.listSrcImg[0]),e.isDialog=!0):e.errURL(t.message)}).catch(function(t){debugger;e.errURL(t.message)})):e.errURL("文章地址不正确"):e.errURL("")},submitUpload:function(){Object.assign(this.value,this.objRes),this.value&&this.value.title&&this.value.comments&&(this.$emit("input",this.value),this.$emit("confirm",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach(function(t){Object(a.a)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({url:this.$refs.inputURL.value},this.objRes))),this.handleClose()},handleClose:function(t){this.isLoading=!1,this.strErrMsg="",Object.assign(this.objRes,this.objResDefault),this.isDialog=!1},eImgLoaded:function(t){var e=t.target;e.removeEventListener("load",this.eImgLoaded);var s=e.naturalWidth,a=e.naturalHeight,t=e.src.substring(0,7);-1==t.indexOf("blob")&&(new Date,e.src,e.type="image/jpeg",Object(i.imgFit)(e,s,a).then(function(t){e.srcOrg=e.src,e.crossOrigin=void 0,e.src=t.src,e.blob=t.blob}))}}},s=(s("019a"),s("cba8")),r=Object(s.a)(r,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-tooltip",{attrs:{content:"输入文章链接",placement:"top",effect:"light"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:s.isLoading,expression:"isLoading"}],ref:"inputURL",attrs:{size:"small"},on:{change:s.eInputURL},model:{value:s.strURLWX,callback:function(t){s.strURLWX=t},expression:"strURLWX"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[s._v("https://")]),a("el-button",{attrs:{slot:"append",type:"success",plain:"",icon:"el-icon-cloudy"},on:{click:function(t){return t.preventDefault(),s.eInputURL.apply(null,arguments)}},slot:"append"},[s._v("读 取")])],1)],1),s.strErrMsg?a("div",{staticClass:"el-upload__tip"},[s._v(s._s(s.strErrMsg))]):s._e(),a("el-dialog",{attrs:{xs:20,title:"读取结果",width:"80%",top:"5vh","close-on-click-modal":!0,visible:s.isDialog,"before-close":s.handleClose},on:{"update:visible":function(t){s.isDialog=t}}},[a("div",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[a("h2",[s._v(s._s(s.objRes.title))]),a("em",[s._v(" "+s._s(s.objRes.date)+" ")])]),a("div",{staticClass:"article",domProps:{innerHTML:s._s(s.objRes.comments)}}),a("el-divider",{attrs:{"content-position":"left"}},[s._v("请选择主形象图")]),a("div",{staticClass:"groupSelectorImg"},s._l(s.listSrcImgWX,function(t,e){return a("div",{key:e,staticClass:"selectorImg",class:s.objRes.sImg==t?"selected":"",attrs:{"data-src":t},on:{click:s.eClickSImg}},[a("el-tooltip",{attrs:{effect:"dark",content:s.objRes.sImg==t?"作为主图":"",value:s.objRes.sImg==t,placement:"top",manual:""}},[a("img",{staticClass:"imgSelectSImg",attrs:{src:s.objRes.listSrcImg[e],fit:"cover"},on:{load:s.eImgLoaded}})])],1)}),0),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:s.handleClose}},[s._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:s.submitUpload}},[s._v("使 用")])],1)],1)],1)},[],!1,null,"0eea7b66",null);e.default=r.exports},d6c9:function(t,e,s){var a=s("df1f"),i=s("e33d"),o=s("d407"),s=s("da5b").Reflect;t.exports=s&&s.ownKeys||function(t){var e=a.f(o(t)),s=i.f;return s?e.concat(s(t)):e}},df1f:function(t,e,s){var a=s("98a0"),i=s("45b8").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},e33d:function(t,e){e.f=Object.getOwnPropertySymbols},e95f:function(t,e,s){"use strict";var a=s("0ff5"),i=s("eb66");t.exports=function(t,e,s){e in t?a.f(t,e,i(0,s)):t[e]=s}}}]);