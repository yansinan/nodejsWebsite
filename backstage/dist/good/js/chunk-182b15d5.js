(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-182b15d5","chunk-16250e40"],{"06f4":function(t,e,i){var n=i("fd96");t.exports=function(t,e){return new(n(t))(e)}},"07e7":function(t,e,i){function n(t,e,i,n){var t=String(s(t)),r="<"+e;return""!==i&&(r+=" "+i+'="'+String(n).replace(o,"&quot;")+'"'),r+">"+t+"</"+e+">"}var r=i("c51c"),a=i("603f"),s=i("0763"),o=/"/g;t.exports=function(e,t){var i={};i[e]=t(n),r(r.P+r.F*a(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",i)}},"33b5":function(t,e,i){"use strict";i.r(e);i("ac50"),i("873e"),i("5c10");var r=i("5d17"),a=(i("b589"),i("410e"),i("0bbd"),i("9736"),i("4c9b"),{name:"",url:"",icon:"",error:""}),n={props:{label:{type:String,default:"链接"},value:{type:Array,default:function(){return[]}}},data:function(){return{objToAdd:Object.assign({},a),strErrorAdd:"",strErrorUpdate:""}},computed:{listObjURL:function(){return this.value}},methods:{removeDomain:function(i){var t=this.listObjURL.findIndex(function(t,e){return t.url==i.url});-1!==t&&this.listObjURL.splice(t,1),this.listObjURL&&this.$emit("input",this.listObjURL)},getURLData:function(n,r){var a=this;return-1!=n.url.indexOf("weibo.com")&&(n.icon="/static/themes/images/link/logo_sina_32x32.png"),-1!=n.url.indexOf("douban.com")&&(n.icon="/static/themes/images/link/logo_douban_32x32.png"),-1!=n.url.indexOf("music.163.com")&&(n.icon="/static/themes/images/link/logo_163_32x32.png"),-1!=n.url.indexOf("music.163.com")?new Promise(function(e,i){var t;n.name="网易云音乐",-1!=n.url.indexOf("song?id=")?(n.type="音乐",n.name="歌曲名",t=n.url.split("song?id=")[1],fetch("/api/fetchNCMSong/"+t).then(function(t){return t.text()}).then(function(t){t=JSON.parse(t);200==t.status&&t.data.name?(n.name=t.data.name||t.data.songs[0].name,n.sImg=t.data.sImg,n.urlSong=t.data.urlSong,n.url=t.data.urlSong,n.urlSongNCM=t.data.urlSongNCM,a.$message({message:"找到网易云音乐歌曲信息，自动填充："+n.name,type:"success"})):(n.name="歌曲无效",a.$message.error(a.$t("validate.inputCorrect",{label:"网易云音乐获取歌曲名称"})),"formUpdate"==r&&(a.strErrorUpdate="未找到网易云音乐歌曲信息："+n.url),"formAdd"==r&&(a.strErrorAdd="未找到网易云音乐歌曲信息："+n.url)),e(n)}).catch(function(t){debugger;i(t)})):n.url.indexOf("music.163.com/#/artist?id=")?e(n):i({msg:"网易云音乐链接参数错误"+n.link,err:"链接错误",data:n})}):(-1!=n.url.indexOf("weibo.com")&&(n.name="微博"),-1!=n.url.indexOf("douban.com")&&(n.name="豆瓣小站"),Promise.resolve(n))},eAddURL:function(i){var e=this,n=this;this.objToAdd.url=i,n.$emit("loading",!0),this.$refs.formAdd.validate(function(t){if(!t)return n.$emit("loading",!1),e.$message.error(e.$t("validate.inputCorrect",{label:e.label})),!1;n.getURLData(n.objToAdd,"formAdd").then(function(t){var e=n.listObjURL.find(function(t){return t.url==i});e?Object.assign(e,t):n.listObjURL.push(t),n.listObjURL=Object(r.a)(new Set(n.listObjURL)),n.objToAdd=Object.assign({},a),n.listObjURL&&n.$emit("input",n.listObjURL),n.$emit("loading",!1)}).catch(function(t){n.$emit("loading",!1);debugger;n.$message.error(n.$t("validate.inputCorrect",{label:"链接编辑"+i}))})})}}},i=i("cba8"),i=Object(i.a)(n,function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",[r("el-form",{ref:"formUpdate",attrs:{model:n.listObjURL,"status-icon":"","inline-message":"true","label-width":"0px"}},n._l(n.listObjURL,function(e,i){return r("el-form-item",{key:e._id,attrs:{prop:"["+i+"].url",rules:{required:!0,type:"url",message:"请输入有效链接",trigger:"blur"},error:n.strErrorUpdate}},[r("el-input",{attrs:{disabled:""},on:{input:function(t){return n.eChangeURL({index:i,objLink:e})}},model:{value:e.url,callback:function(t){n.$set(e,"url",t)},expression:"domain.url"}},[r("template",{slot:"prepend"},["音乐"===e.type&&e.name?r("span",{staticStyle:{width:"120px"}},[n._v(n._s(e.name))]):e.icon?r("img",{staticClass:"img-circle",staticStyle:{width:"32px"},attrs:{src:e.icon}}):r("span",{staticStyle:{width:"120px","text-align":"center","font-size":"18px"}},[r("i",{staticClass:"el-icon-link"})])]),r("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(t){return t.preventDefault(),n.removeDomain(e)}},slot:"append"})],2)],1)}),1),r("el-form",{ref:"formAdd",attrs:{model:n.objToAdd,"status-icon":"","label-width":"0px"}},[r("el-form-item",{key:"add",attrs:{"inline-message":"true",prop:"url",rules:{required:!1,type:"url",message:"请输入有效链接",trigger:["change","input"]},error:n.strErrorAdd}},[r("el-input",{on:{change:n.eAddURL},model:{value:n.objToAdd.url,callback:function(t){n.$set(n.objToAdd,"url",t)},expression:"objToAdd.url"}},[r("template",{staticStyle:{color:"red"},slot:"suffix"},[n._v(n._s(n.label))])],2)],1)],1)],1)},[],!1,null,null,null);e.default=i.exports},"410e":function(t,e,i){"use strict";i("07e7")("link",function(e){return function(t){return e(this,"a","href",t)}})},"4c9b":function(t,e,i){"use strict";var n=i("c51c"),r=i("da31")(6),a="findIndex",s=!0;a in[]&&Array(1)[a](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(t){return r(this,t,1<arguments.length?arguments[1]:void 0)}}),i("d263")(a)},"6ec2":function(t,e,i){var n=i("8132");t.exports=Array.isArray||function(t){return"Array"==n(t)}},b589:function(t,e,i){"use strict";var n=i("c51c"),r=i("da31")(5),a="find",s=!0;a in[]&&Array(1)[a](function(){s=!1}),n(n.P+n.F*s,"Array",{find:function(t){return r(this,t,1<arguments.length?arguments[1]:void 0)}}),i("d263")(a)},b7ef:function(t,e,i){"use strict";i.r(e);var n=i("b80e"),r=i("79b1"),a=i("33b5"),s={name:"",url:"",icon:"",error:""},a={props:{nameMod:{type:String,default:"rubyeyes"},label:{type:String,default:"链接"},dialogState:{type:Object,default:{isShow:!1,isEdited:!1,formData:{},strListObjURL:"listLinks"}}},data:function(){return{objToAdd:Object.assign({},s),strErrorAdd:"",strErrorUpdate:"",isLoading:!1}},computed:{listObjURL:function(){return this.dialogState.formData[this.dialogState.strListObjURL]||[]},isEdited:function(){return!this.isLoading&&this.dialogState.isEdited}},components:{ListURL:a.default},methods:{submitUpload:function(){var e=this,t=Object(n.a)({_id:this.dialogState.formData._id,funUpdate:"updateList"},this.dialogState.strListObjURL,this.listObjURL);Object(r.f)(t,this.nameMod).then(function(t){200===t.status?e.$message({message:e.$t("main.updateSuccess"),type:"success"}):e.$message.error(t.message),setTimeout(function(){e.handleClose()},500)}).catch(function(t){debugger;e.$message.error(e.nameMod+"服务器返回失败:"+result.status+","+t)})},handleClose:function(t){this.$emit("complete",this.listObjURL),this.dialogState.isShow=!1,this.dialogState.formData={},this.dialogState.isEdited=!1},eLoading:function(t){this.isLoading=t},eChange:function(t){this.dialogState.isEdited=!0}}},i=i("cba8"),i=Object(i.a)(a,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",[t("el-dialog",{attrs:{xs:20,title:"图集",width:"80%","close-on-click-modal":!1,visible:e.dialogState.isShow,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.dialogState,"isShow",t)}}},[t("div",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[t("el-avatar",{attrs:{src:e.dialogState.formData.sImg,fit:"cover"}}),e._v(e._s(e.dialogState.formData.name)+"的"+e._s(e.label)+"\n      ")],1),t("ListURL",{attrs:{label:e.lablel},on:{loading:e.eLoading,input:e.eChange},model:{value:e.listObjURL,callback:function(t){e.listObjURL=t},expression:"listObjURL"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"success",disabled:!e.isEdited},on:{click:e.submitUpload}},[e._v("更 新")])],1)],1)],1)},[],!1,null,null,null);e.default=i.exports},da31:function(t,e,i){var L=i("e760"),j=i("e7d3"),O=i("0345"),U=i("a323"),n=i("06f4");t.exports=function(c,t){var f=1==c,m=2==c,g=3==c,b=4==c,p=6==c,h=5==c||p,v=t||n;return function(t,e,i){for(var n,r,a=O(t),s=j(a),o=L(e,i,3),l=U(s.length),u=0,d=f?v(t,l):m?v(t,0):void 0;u<l;u++)if((h||u in s)&&(r=o(n=s[u],u,a),c))if(f)d[u]=r;else if(r)switch(c){case 3:return!0;case 5:return n;case 6:return u;case 2:d.push(n)}else if(b)return!1;return p?-1:g||b?b:d}}},fd96:function(t,e,i){var n=i("467c"),r=i("6ec2"),a=i("6b42")("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}}}]);