(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d362e108"],{"0c42":function(t,e,a){(t.exports=a("690e")(!1)).push([t.i,".article[data-v-66d3afa8]{max-height:50vh;overflow-y:scroll;overflow-x:hidden;border:1px dashed #909399;border-radius:.5em;padding:10px 20px;margin-bottom:60px}.el-upload__tip[data-v-66d3afa8]{color:#f56c6c}.el-divider__text[data-v-66d3afa8]{color:#67c23a}.groupSelectorImg[data-v-66d3afa8]{-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:20px;border:1px dashed #909399;border-radius:.5em;padding:20px 10px}.groupSelectorImg[data-v-66d3afa8],.selectorImg[data-v-66d3afa8]{display:-webkit-box;display:-ms-flexbox;display:flex}.selectorImg[data-v-66d3afa8]{padding:10px;border:1px dashed #909399;width:120px;height:120px;margin:5px 5px;border-radius:.25em}.selectorImg.selected[data-v-66d3afa8]{border:2px solid #409eff}.selectorImg .imgSelectSImg[data-v-66d3afa8]{width:100px;height:100px}",""])},"1adb":function(t,e){t.exports={imgFit:function(l,c,d){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"cover";return new Promise(function(e,t){var a,s=document.createElement("canvas"),i=s.getContext("2d");s.width=c,s.height=d;var r=1;"cover"==u&&(r=Math.max(s.width/l.width,s.height/l.height)),"fill"==u&&(r=Math.min(s.width/l.width,s.height/l.height));var o=s.width/2-l.width/2*r,n=s.height/2-l.height/2*r;i.drawImage(l,o,n,l.width*r,l.height*r),s.toBlob(function(t){a=URL.createObjectURL(t),e({src:a,blob:t})},l.type||"image/jpeg")})}}},"1f3f":function(t,e,a){"use strict";a.r(e);a("388c"),a("0bbd"),a("9736");var i=a("1adb"),s={props:{value:{type:Object,default:{}}},data:function(){return{strURLWX:"",objRes:{sImg:"",title:"",date:"",comments:""},objResDefault:{sImg:"",title:"",date:"",comments:""},isDialog:!1,isLoading:!1,listSrcImgWX:[]}},computed:{},components:{},methods:{eClickSImg:function(t){this.$set(this.objRes,"sImg",t.currentTarget.attributes["data-src"].value)},errURL:function(t){var e=this;e.strErrMsg=t,e.isLoading=!1,t&&e.$message.error(e.strErrMsg)},eInputURL:function(){var e=this,t=e.$refs.inputURL.value;t?(t=t.split("mp.weixin.qq.com/s?")[1])?(e.isLoading=!0,fetch("/api/content/fetchWX?"+t).then(function(t){return t.text()}).then(function(t){e.isLoading=!1;t=JSON.parse(t)||{};t&&200==t.status&&t.data&&t.data.title&&t.data.comments?(e.$message({message:"找到公帐号文章，自动填充："+t.data.title,type:"success"}),Object.assign(e.objRes,t.data),e.objRes.name=e.objRes.name||e.objRes.title,e.objRes.alias=t.data.name||t.data.title,e.objRes.stitle=e.objRes.alias,e.objRes.discription=t.data.name||t.data.title,e.listSrcImgWX=t.data.listSrcImg,e.objRes.listSrcImg=t.data.listSrcImg.map(function(t){return t.replace("https://mmbiz.qpic.cn","/getWXImg")}),e.$set(e.objRes,"sImg",e.objRes.listSrcImg[0]),e.isDialog=!0):e.errURL(t.message)}).catch(function(t){debugger;e.errURL(t.message)})):e.errURL("文章地址不正确"):e.errURL("")},submitUpload:function(){Object.assign(this.value,this.objRes),this.value&&this.value.title&&this.value.comments&&this.$emit("input",this.value),this.handleClose()},handleClose:function(t){this.isLoading=!1,this.strErrMsg="",Object.assign(this.objRes,this.objResDefault),this.isDialog=!1},eImgLoaded:function(t){var e=t.target;e.removeEventListener("load",this.eImgLoaded);var a=e.naturalWidth,s=e.naturalHeight,t=e.src.substring(0,7);-1==t.indexOf("blob")&&(new Date,e.src,e.type="image/jpeg",Object(i.imgFit)(e,a,s).then(function(t){e.srcOrg=e.src,e.crossOrigin=void 0,e.src=t.src,e.blob=t.blob}))}}},a=(a("c352"),a("cba8")),s=Object(a.a)(s,function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticStyle:{"text-align":"left"}},[s("el-tooltip",{attrs:{content:"输入公众号文章链接",placement:"top",effect:"light"}},[s("el-input",{directives:[{name:"loading",rawName:"v-loading",value:a.isLoading,expression:"isLoading"}],ref:"inputURL",attrs:{size:"small"},on:{change:a.eInputURL},model:{value:a.strURLWX,callback:function(t){a.strURLWX=t},expression:"strURLWX"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[a._v("https://")]),s("el-button",{attrs:{slot:"append",type:"success",plain:"",icon:"el-icon-cloudy"},on:{click:function(t){return t.preventDefault(),a.eInputURL.apply(null,arguments)}},slot:"append"},[a._v("读 取")])],1)],1),a.strErrMsg?s("div",{staticClass:"el-upload__tip"},[a._v(a._s(a.strErrMsg))]):a._e(),s("el-dialog",{attrs:{xs:20,title:"读取结果",width:"80%",top:"5vh","close-on-click-modal":!0,visible:a.isDialog,"before-close":a.handleClose},on:{"update:visible":function(t){a.isDialog=t}}},[s("div",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[s("h2",[a._v(a._s(a.objRes.title))]),s("em",[a._v(" "+a._s(a.objRes.date)+" ")])]),s("div",{staticClass:"article",domProps:{innerHTML:a._s(a.objRes.comments)}}),s("el-divider",{attrs:{"content-position":"left"}},[a._v("请选择主形象图")]),s("div",{staticClass:"groupSelectorImg"},a._l(a.listSrcImgWX,function(t,e){return s("div",{key:e,staticClass:"selectorImg",class:a.objRes.sImg==t?"selected":"",attrs:{"data-src":t},on:{click:a.eClickSImg}},[s("el-tooltip",{attrs:{effect:"dark",content:a.objRes.sImg==t?"作为主图":"",value:a.objRes.sImg==t,placement:"top",manual:""}},[s("img",{staticClass:"imgSelectSImg",attrs:{src:a.objRes.listSrcImg[e],fit:"cover"},on:{load:a.eImgLoaded}})])],1)}),0),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:a.handleClose}},[a._v("取 消")]),s("el-button",{attrs:{type:"success"},on:{click:a.submitUpload}},[a._v("使 用")])],1)],1)],1)},[],!1,null,"66d3afa8",null);e.default=s.exports},"388c":function(t,e,a){"use strict";var j=a("d407"),w=a("0345"),L=a("a323"),S=a("ca37"),_=a("61cd"),k=a("b57d"),y=Math.max,U=Math.min,C=Math.floor,M=/\$([$&`']|\d\d?|<[^>]*>)/g,$=/\$([$&`']|\d\d?)/g;a("82fb")("replace",2,function(i,r,R,I){return[function(t,e){var a=i(this),s=null==t?void 0:t[r];return void 0!==s?s.call(t,a,e):R.call(String(a),t,e)},function(t,e){var a=I(R,t,this,e);if(a.done)return a.value;var s=j(t),i=String(this),r="function"==typeof e;r||(e=String(e));var o,n=s.global;n&&(o=s.unicode,s.lastIndex=0);for(var l=[];;){if(null===(p=k(s,i)))break;if(l.push(p),!n)break;""===String(p[0])&&(s.lastIndex=_(i,L(s.lastIndex),o))}for(var c,d="",u=0,g=0;g<l.length;g++){for(var p=l[g],h=String(p[0]),m=y(U(S(p.index),i.length),0),f=[],v=1;v<p.length;v++)f.push(void 0===(c=p[v])?c:String(c));var b,x=p.groups,x=r?(b=[h].concat(f,m,i),void 0!==x&&b.push(x),String(e.apply(void 0,b))):function(r,o,n,l,c,t){var d=n+r.length,u=l.length,e=$;void 0!==c&&(c=w(c),e=M);return R.call(t,e,function(t,e){var a;switch(e.charAt(0)){case"$":return"$";case"&":return r;case"`":return o.slice(0,n);case"'":return o.slice(d);case"<":a=c[e.slice(1,-1)];break;default:var s=+e;if(0==s)return t;if(u<s){var i=C(s/10);return 0===i?t:i<=u?void 0===l[i-1]?e.charAt(1):l[i-1]+e.charAt(1):t}a=l[s-1]}return void 0===a?"":a})}(h,i,m,f,x,e);u<=m&&(d+=i.slice(u,m)+x,u=m+h.length)}return d+i.slice(u)}]})},"4c1a":function(t,e,a){var s=a("0c42");(s="string"==typeof(s=s.__esModule?s.default:s)?[[t.i,s,""]]:s).locals&&(t.exports=s.locals);(0,a("5925").default)("78125ad9",s,!0,{sourceMap:!1,shadowMode:!1})},c352:function(t,e,a){"use strict";a("4c1a")}}]);