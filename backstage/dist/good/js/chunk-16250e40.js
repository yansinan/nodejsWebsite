(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-16250e40"],{"06f4":function(t,e,n){var r=n("fd96");t.exports=function(t,e){return new(r(t))(e)}},"07e7":function(t,e,n){function r(t,e,n,r){var t=String(a(t)),i="<"+e;return""!==n&&(i+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),i+">"+t+"</"+e+">"}var i=n("c51c"),o=n("603f"),a=n("0763"),s=/"/g;t.exports=function(e,t){var n={};n[e]=t(r),i(i.P+i.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},"33b5":function(t,e,n){"use strict";n.r(e);n("ac50"),n("873e"),n("5c10");var i=n("5d17"),o=(n("b589"),n("410e"),n("0bbd"),n("9736"),n("4c9b"),{name:"",url:"",icon:"",error:""}),r={props:{label:{type:String,default:"链接"},value:{type:Array,default:function(){return[]}}},data:function(){return{objToAdd:Object.assign({},o),strErrorAdd:"",strErrorUpdate:""}},computed:{listObjURL:function(){return this.value}},methods:{removeDomain:function(n){var t=this.listObjURL.findIndex(function(t,e){return t.url==n.url});-1!==t&&this.listObjURL.splice(t,1),this.listObjURL&&this.$emit("input",this.listObjURL)},getURLData:function(r,i){var o=this;return-1!=r.url.indexOf("weibo.com")&&(r.icon="/static/themes/images/link/logo_sina_32x32.png"),-1!=r.url.indexOf("douban.com")&&(r.icon="/static/themes/images/link/logo_douban_32x32.png"),-1!=r.url.indexOf("music.163.com")&&(r.icon="/static/themes/images/link/logo_163_32x32.png"),-1!=r.url.indexOf("weidian.com")&&(r.icon="/static/themes/images/link/logo_weidian_32x32.png"),-1!=r.url.indexOf("music.163.com")?new Promise(function(e,n){var t;r.name="网易云音乐",-1!=r.url.indexOf("song?id=")?(r.type="音乐",r.name="歌曲名",t=r.url.split("song?id=")[1],fetch("/api/fetchNCMSong/"+t).then(function(t){return t.text()}).then(function(t){t=JSON.parse(t);200==t.status&&t.data.name?(r.name=t.data.name||t.data.songs[0].name,r.sImg=t.data.sImg,r.urlSong=t.data.urlSong,r.url=t.data.urlSong,r.urlSongNCM=t.data.urlSongNCM,o.$message({message:"找到网易云音乐歌曲信息，自动填充："+r.name,type:"success"})):(r.name="歌曲无效",o.$message.error(o.$t("validate.inputCorrect",{label:"网易云音乐获取歌曲名称"})),"formUpdate"==i&&(o.strErrorUpdate="未找到网易云音乐歌曲信息："+r.url),"formAdd"==i&&(o.strErrorAdd="未找到网易云音乐歌曲信息："+r.url)),e(r)}).catch(function(t){debugger;n(t)})):r.url.indexOf("music.163.com/#/artist?id=")?e(r):n({msg:"网易云音乐链接参数错误"+r.link,err:"链接错误",data:r})}):(-1!=r.url.indexOf("weibo.com")&&(r.name="微博"),-1!=r.url.indexOf("douban.com")&&(r.name="豆瓣小站"),Promise.resolve(r))},eAddURL:function(n){var e=this,r=this;this.objToAdd.url=n,r.$emit("loading",!0),this.$refs.formAdd.validate(function(t){if(!t)return r.$emit("loading",!1),e.$message.error(e.$t("validate.inputCorrect",{label:e.label})),!1;r.getURLData(r.objToAdd,"formAdd").then(function(t){var e=r.listObjURL.find(function(t){return t.url==n});e?Object.assign(e,t):r.listObjURL.push(t),r.listObjURL=Object(i.a)(new Set(r.listObjURL)),r.objToAdd=Object.assign({},o),r.listObjURL&&r.$emit("input",r.listObjURL),r.$emit("loading",!1)}).catch(function(t){r.$emit("loading",!1);debugger;r.$message.error(r.$t("validate.inputCorrect",{label:"链接编辑"+n}))})})}}},n=n("cba8"),n=Object(n.a)(r,function(){var r=this,t=r.$createElement,i=r._self._c||t;return i("div",[i("el-form",{ref:"formUpdate",attrs:{model:r.listObjURL,"status-icon":"","inline-message":"true","label-width":"0px"}},r._l(r.listObjURL,function(e,n){return i("el-form-item",{key:e._id,attrs:{prop:"["+n+"].url",rules:{required:!0,type:"url",message:"请输入有效链接",trigger:"blur"},error:r.strErrorUpdate}},[i("el-input",{attrs:{disabled:""},on:{input:function(t){return r.eChangeURL({index:n,objLink:e})}},model:{value:e.url,callback:function(t){r.$set(e,"url",t)},expression:"domain.url"}},[i("template",{slot:"prepend"},["音乐"===e.type&&e.name?i("span",{staticStyle:{width:"120px"}},[r._v(r._s(e.name))]):e.icon?i("img",{staticClass:"img-circle",staticStyle:{width:"32px"},attrs:{src:e.icon}}):i("span",{staticStyle:{width:"120px","text-align":"center","font-size":"18px"}},[i("i",{staticClass:"el-icon-link"})])]),i("el-button",{attrs:{slot:"append",icon:"el-icon-delete"},on:{click:function(t){return t.preventDefault(),r.removeDomain(e)}},slot:"append"})],2)],1)}),1),i("el-form",{ref:"formAdd",attrs:{model:r.objToAdd,"status-icon":"","label-width":"0px"}},[i("el-form-item",{key:"add",attrs:{"inline-message":"true",prop:"url",rules:{required:!1,type:"url",message:"请输入有效链接",trigger:["change","input"]},error:r.strErrorAdd}},[i("el-input",{on:{change:r.eAddURL},model:{value:r.objToAdd.url,callback:function(t){r.$set(r.objToAdd,"url",t)},expression:"objToAdd.url"}},[i("template",{staticStyle:{color:"red"},slot:"suffix"},[r._v(r._s(r.label))])],2)],1)],1)],1)},[],!1,null,null,null);e.default=n.exports},"410e":function(t,e,n){"use strict";n("07e7")("link",function(e){return function(t){return e(this,"a","href",t)}})},"4c9b":function(t,e,n){"use strict";var r=n("c51c"),i=n("da31")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n("d263")(o)},"6ec2":function(t,e,n){var r=n("8132");t.exports=Array.isArray||function(t){return"Array"==r(t)}},b589:function(t,e,n){"use strict";var r=n("c51c"),i=n("da31")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n("d263")(o)},da31:function(t,e,n){var x=n("e760"),O=n("e7d3"),j=n("0345"),A=n("a323"),r=n("06f4");t.exports=function(d,t){var f=1==d,m=2==d,p=3==d,g=4==d,b=6==d,h=5==d||b,v=t||r;return function(t,e,n){for(var r,i,o=j(t),a=O(o),s=x(e,n,3),u=A(a.length),l=0,c=f?v(t,u):m?v(t,0):void 0;l<u;l++)if((h||l in a)&&(i=s(r=a[l],l,o),d))if(f)c[l]=i;else if(i)switch(d){case 3:return!0;case 5:return r;case 6:return l;case 2:c.push(r)}else if(g)return!1;return b?-1:p||g?g:c}}},fd96:function(t,e,n){var r=n("467c"),i=n("6ec2"),o=n("6b42")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}}}]);